(()=>{var e={};e.id=547,e.ids=[547],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},32081:e=>{"use strict";e.exports=require("child_process")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},93919:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>d,pages:()=>c,routeModule:()=>x,tree:()=>u}),t(21987),t(35866),t(762);var r=t(23191),i=t(88716),l=t(37922),n=t.n(l),o=t(95231),a={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(a[e]=()=>o[e]);t.d(s,a);let u=["",{children:["(user)",{children:["(userprofile)",{children:["u",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,21987)),"C:\\Users\\albin\\OneDrive\\Desktop\\albints158\\client-app\\app\\(user)\\(userprofile)\\u\\[id]\\page.jsx"]}]},{}]},{}]},{}]},{"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,762)),"C:\\Users\\albin\\OneDrive\\Desktop\\albints158\\client-app\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\albin\\OneDrive\\Desktop\\albints158\\client-app\\app\\(user)\\(userprofile)\\u\\[id]\\page.jsx"],d="/(user)/(userprofile)/u/[id]/page",p={require:t,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/(user)/(userprofile)/u/[id]/page",pathname:"/u/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},67044:(e,s,t)=>{Promise.resolve().then(t.bind(t,86306))},86306:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>S});var r=t(10326),i=t(17577),l=t(20239);let n=(0,t(3539).Ue)(e=>({user:null,posts:[],savedPosts:[],setUser:s=>e({user:s}),setPosts:s=>e({posts:s}),setSavedPosts:s=>e({savedPosts:s}),addPost:s=>e(e=>({posts:[...e.posts,s]})),updatePost:(s,t)=>e(e=>({posts:e.posts.map(e=>e._id===s?{...e,...t}:e)})),removePost:s=>e(e=>({posts:e.posts.filter(e=>e._id!==s)}))}));var o=t(77109),a=t(54173),u=t.n(a),c=t(46084);let d=i.forwardRef(({className:e,...s},t)=>r.jsx("textarea",{className:(0,c.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:t,...s}));d.displayName="Textarea";var p=t(6917),x=t(46226);function f(){return r.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-100",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("h1",{className:"text-6xl font-bold text-gray-800 mb-4",children:"404"}),r.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"User Not Found"}),r.jsx("p",{className:"text-gray-500 mb-8",children:"The user you are looking for does not exist or has been removed."}),r.jsx("a",{href:"/",className:"inline-block bg-blue-500 text-white font-semibold py-2 px-4 rounded hover:bg-blue-600",children:"Go Back Home"})]})})}var m=t(46667),h=t(38492),g=t(18729),b=t(96070),v=t(90434);function j({posts:e}){return(0,r.jsxs)("div",{className:"pt-6",children:[r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:e.map(e=>r.jsx("div",{className:"flex justify-center items-center",children:r.jsx(v.default,{href:`/post/${e._id}`,children:r.jsx(x.default,{src:e.imageUrl[0],alt:"Post image",height:300,width:300,className:"object-cover border"},e._id)})},e._id))}),r.jsx("div",{className:"pb-24"})]})}function y(){let{user:e,savedPosts:s}=n(e=>({user:e.user,savedPosts:e.savedPosts}));return r.jsx("div",{children:(0,r.jsxs)("div",{className:"pt-6",children:[r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:s.map(e=>r.jsx("div",{className:"flex justify-center items-center",children:r.jsx(v.default,{href:`/post/${e._id}`,children:r.jsx(x.default,{src:e.imageUrl[0],alt:"Post image",height:300,width:300,className:"object-cover border"},e._id)})},e._id))}),r.jsx("div",{className:"pb-24"})]})})}function w({username:e}){let{edgestore:s}=(0,b.P)(),t=(0,i.useRef)(null),{data:a,status:c}=(0,o.useSession)(),[v,w]=(0,i.useState)(!1),[N,P]=(0,i.useState)(null),[S,q]=(0,i.useState)(null),[k,E]=(0,i.useState)(!1),[_,C]=(0,i.useState)(!1);console.log(a);let[U,D]=(0,i.useState)({name:"",bio:""}),{user:R,posts:O}=n(e=>({user:e.user,posts:e.posts}));async function F(){if(N){let e=await s.publicFiles.upload({file:N,onProgressChange:e=>{console.log(e)}});console.log(e);let t=await l.Z.post("/api/user/uploadProfile",{url:e.url,userId:a?.id});t&&(console.log(t),P(null),q(null),E(!1),a.user.image=t.data.url)}}if(console.log(O),!R||!R.email)return r.jsx(f,{});let A=a?.user?.email===R.email;async function T(){w(e=>!e);try{let e=await l.Z.post("/api/user/followprofile",{followUser:R.email,orginalUser:a.user.email});console.log(e)}catch(e){console.error("Failed to follow/unfollow profile",e),w(e=>!e)}}async function G(){try{console.log("invoked"),C(!1);let e=await l.Z.post("/api/user/updateProfile",{...U,email:R.email});e.data.success?(console.log("Profile updated successfully"),C(!1)):console.error("Profile update failed:",e.data.message)}catch(e){console.error("Failed to update profile",e)}}return console.log(),(0,r.jsxs)("div",{className:"pt-16 px-4 sm:px-6 lg:px-8 xl:px-72",children:[_?(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[r.jsx("h2",{className:"text-lg font-bold mb-4",children:"Edit Profile"}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),G()},children:[(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Name"}),r.jsx("input",{type:"text",value:U.name,onChange:e=>D({...U,name:e.target.value}),className:"border border-gray-300 p-2 rounded w-full"})]}),(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Bio"}),r.jsx(d,{value:U.bio,onChange:e=>D({...U,bio:e.target.value}),rows:"4"})]}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[r.jsx("button",{type:"submit",className:" py-1 px-4 rounded",children:r.jsx("h4",{className:"scroll-m-20 text-xl font-semibold tracking-tight",children:"Save"})}),r.jsx("button",{type:"button",onClick:()=>C(!1),className:"border border-gray-400 py-1 px-4 rounded",children:r.jsx("h4",{className:"scroll-m-20 text-xl font-semibold tracking-tight",children:"Cancel"})})]})]})]}):(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row lg:space-x-24",children:[r.jsx("div",{className:"rounded-full flex items-center justify-center border-gray-300 mb-6 lg:mb-0",children:r.jsx(x.default,{src:R.profilePicture,className:"rounded-full p-1 w-[145px] h-[145px] object-cover",width:145,height:145,alt:"",onClick:()=>E(!0)})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center lg:flex-row lg:items-start lg:justify-start lg:space-x-6",children:[(0,r.jsxs)("span",{className:"font-bold text-lg",children:["@",R.username]}),r.jsx("span",{children:A?r.jsx("span",{className:"",children:r.jsx(g.z,{onClick:()=>C(!0),variant:"outline",children:"Edit Profile"})}):r.jsx("button",{className:"border border-gray-400 rounded py-1 px-2 mt-2 lg:mt-0 hover:bg-gray-200",onClick:T,children:v?"Following":"Follow"})}),r.jsx("div",{className:"flex items-center justify-center mt-2 lg:mt-0"})]}),(0,r.jsxs)("div",{className:"flex justify-between pt-3 text-center lg:text-left",children:[(0,r.jsxs)("span",{className:"text-sm font-semibold",children:[O.length," posts"]}),(0,r.jsxs)("span",{className:"text-sm font-semibold",children:[R.followers.length," followers"]}),(0,r.jsxs)("span",{className:"text-sm font-semibold",children:[R.following.length," following"]})]}),(0,r.jsxs)("div",{className:"pt-6 grid",children:[r.jsx("span",{className:"text-lg font-semibold",children:U.name}),(0,r.jsxs)("span",{children:[r.jsx("br",{}),U.bio]})]})]})]}),r.jsx("div",{className:"pt-4"}),r.jsx("div",{className:"border w-full"}),r.jsx("div",{className:"mt-2",children:(0,r.jsxs)(p.mQ,{defaultValue:"posts",children:[r.jsx("div",{className:"flex items-center justify-center font-extrabold",children:r.jsx("div",{className:"flex items-center",children:(0,r.jsxs)(p.dr,{children:[r.jsx(p.SP,{value:"posts",children:"Posts"}),r.jsx(p.SP,{value:"saved-posts",children:"Saved Post"})]})})}),r.jsx(p.nU,{value:"saved-posts",children:r.jsx(y,{username:e})}),r.jsx(p.nU,{value:"posts",children:r.jsx(j,{posts:O})}),r.jsx(p.nU,{value:"archived"})]})}),k&&r.jsx(u(),{isOpen:k,onRequestClose:()=>E(!1),className:"fixed inset-0 flex items-center justify-center p-4",overlayClassName:"fixed inset-0 bg-black bg-opacity-50",ariaHideApp:!1,children:(0,r.jsxs)("div",{className:"relative bg-white rounded-lg shadow-lg p-6 w-full max-w-lg flex flex-col items-center ",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Add New Profile"}),N?r.jsx(x.default,{onClick:()=>P(null),src:S,alt:"selected file",width:300,height:300}):r.jsx(h._HF,{onClick:()=>t.current.click(),className:"text-5xl text-gray-400 cursor-pointer"}),r.jsx("input",{hidden:!0,ref:t,type:"file",accept:"image/*",onChange:function(e){let s=e.target.files[0];s&&(P(s),q(URL.createObjectURL(s)))}}),r.jsx("button",{onClick:F,disabled:!N,className:"w-full bg-red-600 text-white p-2 shadow-md rounded-lg hover:brightness-105 disabled:bg-gray-200 disabled:cursor-not-allowed disabled:hover:brightness-100",children:"Upload Profile Picture"}),r.jsx(m.oHP,{className:"cursor-pointer absolute top-4 right-4 hover:text-red-600 transition duration-300",onClick:function(){E(!1),q(null),P(null)}})]})})]})}var N=t(35047);function P({children:e}){let{data:s,status:t}=(0,o.useSession)();return(0,N.useRouter)(),r.jsx(r.Fragment,{children:e})}function S({params:e}){(0,N.useRouter)();let{user:s,setUser:t,posts:l,setPosts:o,addPost:a,savedPosts:u,setSavedPosts:c}=n(e=>({user:e.user,posts:e.posts,savedPosts:e.savedPosts,setUser:e.setUser,setPosts:e.setPosts,addPost:e.addPost,setSavedPosts:e.setSavedPosts})),{id:d}=e;return(0,i.useRef)(!1),(0,i.useRef)(!1),r.jsx(P,{children:r.jsx(w,{})})}t(52960),t(3933)},52960:(e,s,t)=>{"use strict";t(10326),t(17577)},35047:(e,s,t)=>{"use strict";var r=t(77389);t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}})},69856:(e,s,t)=>{"use strict";/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=t(17577),i="function"==typeof Object.is?Object.is:function(e,s){return e===s&&(0!==e||1/e==1/s)||e!=e&&s!=s},l=r.useState,n=r.useEffect,o=r.useLayoutEffect,a=r.useDebugValue;function u(e){var s=e.getSnapshot;e=e.value;try{var t=s();return!i(e,t)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,s){return s()}:function(e,s){var t=s(),r=l({inst:{value:t,getSnapshot:s}}),i=r[0].inst,c=r[1];return o(function(){i.value=t,i.getSnapshot=s,u(i)&&c({inst:i})},[e,t,s]),n(function(){return u(i)&&c({inst:i}),e(function(){u(i)&&c({inst:i})})},[e]),a(t),t};s.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:c},77513:(e,s,t)=>{"use strict";/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=t(17577),i=t(94095),l="function"==typeof Object.is?Object.is:function(e,s){return e===s&&(0!==e||1/e==1/s)||e!=e&&s!=s},n=i.useSyncExternalStore,o=r.useRef,a=r.useEffect,u=r.useMemo,c=r.useDebugValue;s.useSyncExternalStoreWithSelector=function(e,s,t,r,i){var d=o(null);if(null===d.current){var p={hasValue:!1,value:null};d.current=p}else p=d.current;var x=n(e,(d=u(function(){function e(e){if(!a){if(a=!0,n=e,e=r(e),void 0!==i&&p.hasValue){var s=p.value;if(i(s,e))return o=s}return o=e}if(s=o,l(n,e))return s;var t=r(e);return void 0!==i&&i(s,t)?s:(n=e,o=t)}var n,o,a=!1,u=void 0===t?null:t;return[function(){return e(s())},null===u?void 0:function(){return e(u())}]},[s,t,r,i]))[0],d[1]);return a(function(){p.hasValue=!0,p.value=x},[x]),c(x),x}},94095:(e,s,t)=>{"use strict";e.exports=t(69856)},21508:(e,s,t)=>{"use strict";e.exports=t(77513)},21987:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>n,__esModule:()=>l,default:()=>o});var r=t(68570);let i=(0,r.createProxy)(String.raw`C:\Users\albin\OneDrive\Desktop\albints158\client-app\app\(user)\(userprofile)\u\[id]\page.jsx`),{__esModule:l,$$typeof:n}=i;i.default;let o=(0,r.createProxy)(String.raw`C:\Users\albin\OneDrive\Desktop\albints158\client-app\app\(user)\(userprofile)\u\[id]\page.jsx#default`)},3539:(e,s,t)=>{"use strict";t.d(s,{Ue:()=>d});var r=t(98675),i=t(17577),l=t(21508);let{useDebugValue:n}=i,{useSyncExternalStoreWithSelector:o}=l,a=!1,u=e=>e,c=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let s="function"==typeof e?(0,r.M)(e):e,t=(e,t)=>(function(e,s=u,t){t&&!a&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),a=!0);let r=o(e.subscribe,e.getState,e.getServerState||e.getInitialState,s,t);return n(r),r})(s,e,t);return Object.assign(t,s),t},d=e=>e?c(e):c},98675:(e,s,t)=>{"use strict";t.d(s,{M:()=>i});let r=e=>{let s;let t=new Set,r=(e,r)=>{let i="function"==typeof e?e(s):e;if(!Object.is(i,s)){let e=s;s=(null!=r?r:"object"!=typeof i||null===i)?i:Object.assign({},s,i),t.forEach(t=>t(s,e))}},i=()=>s,l={setState:r,getState:i,getInitialState:()=>n,subscribe:e=>(t.add(e),()=>t.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},n=s=e(r,i,l);return l},i=e=>e?r(e):r}};var s=require("../../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[948,720,621,492,579,926,952],()=>t(93919));module.exports=r})();
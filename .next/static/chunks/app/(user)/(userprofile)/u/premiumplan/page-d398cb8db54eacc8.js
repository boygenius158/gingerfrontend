(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4739],{54708:function(e,t,n){Promise.resolve().then(n.bind(n,24687))},24687:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n(57437),s=n(42384),o=n(7345),a=n(13537);n(66648);let l=(0,a.J)("pk_test_51PirppRr9XEd7LoYO63o5eLQqYHIYD9V5K0yDPvpShgNikCcdTiUNPBGhaSldf37lr1GCD3ULS1LHJrs4BogN6ph00DleHSh9S");function i(){return(0,r.jsx)("div",{children:(0,r.jsx)(o.Elements,{stripe:l,children:(0,r.jsx)(s.Z,{})})})}},6577:function(e,t,n){"use strict";var r=n(38472),s=n(30998);let o=r.Z.create({baseURL:"http://localhost:5000",headers:{"Content-Type":"application/json"}});o.interceptors.request.use(async e=>{let t=await (0,s.getSession)();return console.log("hi",t),t&&t.token&&(console.log(t),e.headers.Authorization="Bearer ".concat(t.token)),e},e=>Promise.reject(e)),t.Z=o},42384:function(e,t,n){"use strict";var r=n(57437),s=n(2265),o=n(7345),a=n(38472),l=n(30998),i=n(6577);t.Z=function(){let{data:e,status:t}=(0,l.useSession)(),n=(0,o.useStripe)(),c=(0,o.useElements)(),[d,u]=(0,s.useState)(null),[m,p]=(0,s.useState)(!1),[h,x]=(0,s.useState)(!1);console.log(e);let b=async t=>{t.preventDefault(),p(!0);try{let{data:{clientSecret:t}}=await a.Z.post("".concat("http://localhost:5000","/api/create-payment-intent"),{amount:1e3,userId:null==e?void 0:e.id});console.log("Client Secret:",t);let r=c.getElement(o.CardElement),s=await n.confirmCardPayment(t,{payment_method:{card:r}});s.error?(u(s.error.message),p(!1)):(u(null),p(!1),x(!0),await i.Z.post("/api/user/premium-payment",{userId:null==e?void 0:e.id}))}catch(e){u("An unexpected error occurred."),p(!1)}};return(0,r.jsxs)("form",{onSubmit:b,className:"max-w-md mx-auto p-6 bg-white shadow-lg rounded-lg",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Complete Your Payment"}),(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)(o.CardElement,{className:"p-3 border border-gray-300 rounded-md",options:{style:{base:{fontSize:"16px",color:"#424770","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}}})}),(0,r.jsx)("button",{type:"submit",disabled:!n||m||h,className:"w-full py-3 px-4 rounded-lg bg-blue-600 text-white font-semibold hover:bg-blue-700 transition-colors duration-300 ".concat(m?"cursor-not-allowed":""),children:m?"Processing...":"Pay"}),d&&(0,r.jsx)("div",{className:"text-red-500 text-sm mt-2",children:d}),h&&(0,r.jsx)("div",{className:"text-green-500 text-sm mt-2",children:"Payment succeeded!"})]})}}},function(e){e.O(0,[998,6648,8472,5985,2971,7023,1744],function(){return e(e.s=54708)}),_N_E=e.O()}]);
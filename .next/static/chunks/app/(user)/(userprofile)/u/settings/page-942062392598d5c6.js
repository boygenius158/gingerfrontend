(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5544],{68537:function(e,s,t){Promise.resolve().then(t.bind(t,64858)),Promise.resolve().then(t.bind(t,56201)),Promise.resolve().then(t.bind(t,4119))},42384:function(e,s,t){"use strict";var r=t(57437),a=t(2265),n=t(7345),o=t(38472),d=t(30998),l=t(6577);s.Z=function(){let{data:e,status:s}=(0,d.useSession)(),t=(0,n.useStripe)(),i=(0,n.useElements)(),[c,u]=(0,a.useState)(null),[m,f]=(0,a.useState)(!1),[x,p]=(0,a.useState)(!1);console.log(e);let h=async s=>{s.preventDefault(),f(!0);try{let{data:{clientSecret:s}}=await o.Z.post("".concat("http://localhost:5000","/api/create-payment-intent"),{amount:1e3,userId:null==e?void 0:e.id});console.log("Client Secret:",s);let r=i.getElement(n.CardElement),a=await t.confirmCardPayment(s,{payment_method:{card:r}});a.error?(u(a.error.message),f(!1)):(u(null),f(!1),p(!0),await l.Z.post("/api/user/premium-payment",{userId:null==e?void 0:e.id}))}catch(e){u("An unexpected error occurred."),f(!1)}};return(0,r.jsxs)("form",{onSubmit:h,className:"max-w-md mx-auto p-6 bg-white shadow-lg rounded-lg",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Complete Your Payment"}),(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)(n.CardElement,{className:"p-3 border border-gray-300 rounded-md",options:{style:{base:{fontSize:"16px",color:"#424770","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}}})}),(0,r.jsx)("button",{type:"submit",disabled:!t||m||x,className:"w-full py-3 px-4 rounded-lg bg-blue-600 text-white font-semibold hover:bg-blue-700 transition-colors duration-300 ".concat(m?"cursor-not-allowed":""),children:m?"Processing...":"Pay"}),c&&(0,r.jsx)("div",{className:"text-red-500 text-sm mt-2",children:c}),x&&(0,r.jsx)("div",{className:"text-green-500 text-sm mt-2",children:"Payment succeeded!"})]})}},56201:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return j}});var r=t(57437),a=t(2265),n=t(92005),o=t(87592),d=t(22468),l=t(28165),i=t(77700);n.v2,n.ZA,n.h_,n.Tr,n.Ee,a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(n.fC,{ref:s,className:(0,i.cn)("flex h-10 items-center space-x-1 rounded-md border bg-background p-1",t),...a})}).displayName=n.fC.displayName,a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(n.xz,{ref:s,className:(0,i.cn)("flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",t),...a})}).displayName=n.xz.displayName,a.forwardRef((e,s)=>{let{className:t,inset:a,children:d,...l}=e;return(0,r.jsxs)(n.fF,{ref:s,className:(0,i.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",a&&"pl-8",t),...l,children:[d,(0,r.jsx)(o.Z,{className:"ml-auto h-4 w-4"})]})}).displayName=n.fF.displayName,a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(n.tu,{ref:s,className:(0,i.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...a})}).displayName=n.tu.displayName,a.forwardRef((e,s)=>{let{className:t,align:a="start",alignOffset:o=-4,sideOffset:d=8,...l}=e;return(0,r.jsx)(n.h_,{children:(0,r.jsx)(n.VY,{ref:s,align:a,alignOffset:o,sideOffset:d,className:(0,i.cn)("z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...l})})}).displayName=n.VY.displayName,a.forwardRef((e,s)=>{let{className:t,inset:a,...o}=e;return(0,r.jsx)(n.ck,{ref:s,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a&&"pl-8",t),...o})}).displayName=n.ck.displayName,a.forwardRef((e,s)=>{let{className:t,children:a,checked:o,...l}=e;return(0,r.jsxs)(n.oC,{ref:s,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:o,...l,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(n.wU,{children:(0,r.jsx)(d.Z,{className:"h-4 w-4"})})}),a]})}).displayName=n.oC.displayName,a.forwardRef((e,s)=>{let{className:t,children:a,...o}=e;return(0,r.jsxs)(n.Rk,{ref:s,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...o,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(n.wU,{children:(0,r.jsx)(l.Z,{className:"h-2 w-2 fill-current"})})}),a]})}).displayName=n.Rk.displayName,a.forwardRef((e,s)=>{let{className:t,inset:a,...o}=e;return(0,r.jsx)(n.__,{ref:s,className:(0,i.cn)("px-2 py-1.5 text-sm font-semibold",a&&"pl-8",t),...o})}).displayName=n.__.displayName,a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(n.Z0,{ref:s,className:(0,i.cn)("-mx-1 my-1 h-px bg-muted",t),...a})}).displayName=n.Z0.displayName;let c=(0,t(12218).j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function u(e){let{className:s,variant:t,...a}=e;return(0,r.jsx)("div",{className:(0,i.cn)(c({variant:t}),s),...a})}function m(e){let{setPage:s}=e,t=()=>{s("payment")};return(0,r.jsx)("section",{className:"",children:(0,r.jsx)("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:(0,r.jsx)("div",{className:"space-y-8 lg:grid lg:grid-cols-3 sm:gap-6 xl:gap-8 lg:space-y-0 lg:items-center",children:(0,r.jsxs)("div",{className:"flex flex-col mx-auto max-w-sm text-gray-900 rounded-2xl bg-gray-50 p-6 xl:py-9 xl:px-12 transition-all duration-500 hover:bg-gray-100",children:[(0,r.jsx)("h3",{className:"font-manrope text-2xl font-bold mb-3",children:"Pro"}),(0,r.jsxs)("div",{className:"flex items-center mb-6",children:[(0,r.jsx)("span",{className:"font-manrope mr-2 text-6xl font-semibold",children:"$350"}),(0,r.jsx)("span",{className:"text-xl text-gray-500",children:"/ Onetime purchase"})]}),(0,r.jsx)("ul",{className:"mb-12 space-y-6 text-left text-lg text-gray-500",children:(0,r.jsxs)("li",{className:"flex items-center space-x-4",children:[(0,r.jsx)("svg",{className:"flex-shrink-0 w-6 h-6 text-indigo-600",viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M10 14.7875L13.0959 17.8834C13.3399 18.1274 13.7353 18.1275 13.9794 17.8838L20.625 11.25M15 27.5C8.09644 27.5 2.5 21.9036 2.5 15C2.5 8.09644 8.09644 2.5 15 2.5C21.9036 2.5 27.5 8.09644 27.5 15C27.5 21.9036 21.9036 27.5 15 27.5Z",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,r.jsx)("span",{children:"Unlock Ginger Swipe!"})]})}),(0,r.jsx)("span",{className:"py-2.5 px-5 bg-blue-400 shadow-sm rounded-full transition-all duration-500 text-base text-white font-semibold text-center w-fit mx-auto hover:bg-indigo-400 cursor-pointer",onClick:()=>t(),children:"Buy"})]})})})})}var f=t(42384),x=t(7345),p=t(13537);t(66648);let h=(0,p.J)("pk_test_51PirppRr9XEd7LoYO63o5eLQqYHIYD9V5K0yDPvpShgNikCcdTiUNPBGhaSldf37lr1GCD3ULS1LHJrs4BogN6ph00DleHSh9S");function g(){return(0,r.jsx)("div",{children:(0,r.jsx)(x.Elements,{stripe:h,children:(0,r.jsx)(f.Z,{})})})}var b=t(6577),y=t(30998),v=t(92914);function w(e){let{daysLeft:s}=e;return(0,r.jsx)("div",{className:"",children:(0,r.jsxs)("div",{className:"flex items-center justify-center p-2 ml-4 ",children:[(0,r.jsxs)("h1",{className:"scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl",children:[(0,r.jsxs)("span",{className:"text-amber-300",children:[s," "]}),"days left for premium to expire"]}),(0,r.jsx)(v.J5,{src:"https://lottie.host/01219472-dc1c-4306-a580-71c705ff1ad0/G88NDSeO5d.json ",className:"player",loop:!0,autoplay:!0,style:{height:"300px",width:"300px"}})]})})}function j(){let{data:e,status:s}=(0,y.useSession)(),[t,n]=(0,a.useState)(null),[o,d]=(0,a.useState)(""),l=(0,a.useCallback)(async()=>{let s=await b.Z.post("/api/user/premiumStatus",{userId:null==e?void 0:e.id});console.log(e),console.log(s.data.role),n(s.data.role),("premium"===s.data.role||"admin"===s.data.role)&&d((await b.Z.post("/api/user/expiry-date",{userId:null==e?void 0:e.id})).data.daysLeft)},[e]);return(0,a.useEffect)(()=>{"authenticated"===s&&l()},[l,s]),(0,r.jsxs)("div",{className:"bg-white border h-screen my-7",children:[(0,r.jsx)("div",{className:"p-4",children:(0,r.jsx)(u,{children:"Premium"})}),"payment"===t&&(0,r.jsx)("div",{children:(0,r.jsx)(g,{})}),"user"===t&&(0,r.jsxs)("div",{className:"p-4 flex",children:[(0,r.jsxs)("h1",{className:"scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl",children:["Unlock Premium: A better way to use"," ",(0,r.jsx)("span",{className:"bg-blue-500 text-white rounded",children:"Ginger!"})]}),(0,r.jsx)("div",{className:"",children:(0,r.jsx)(m,{setPage:n})})]}),"premium"===t&&(0,r.jsxs)("div",{children:[" ",(0,r.jsx)(w,{daysLeft:o})]}),"admin"===t&&(0,r.jsxs)("div",{children:[" ",(0,r.jsx)(w,{daysLeft:o})]})]})}},4119:function(e,s,t){"use strict";t.d(s,{default:function(){return g}});var r=t(57437),a=t(56360),n=t(10273),o=t(92404),d=t(10464),l=t(65236),i=t(2265),c=t(6577),u=t(30998),m=t(88726);function f(){let{data:e}=(0,u.useSession)(),[s,t]=(0,i.useState)(""),[l,f]=(0,i.useState)(""),[x,p]=(0,i.useState)("");(0,i.useEffect)(()=>{(async()=>{try{if(e){let s=await c.Z.post("/api/user/fetch-name-username",{id:null==e?void 0:e.id});console.log(s),t(s.data.user.name),f(s.data.user.username)}}catch(e){console.error("Error fetching user data:",e)}})()},[e]);let h=async t=>{t.preventDefault(),p("");try{let t=await c.Z.post("/api/user/update-user",{id:null==e?void 0:e.id,name:s,username:l});console.log(t),t.data.success?m.Am.success("profile updated successfully!"):(console.log(t),p(t.data.error||"Username is not available."))}catch(e){console.log(e),console.error("Error updating user data:",e)}};return(0,r.jsx)("div",{children:(0,r.jsxs)(n.Zb,{children:[(0,r.jsxs)(n.Ol,{children:[(0,r.jsx)(n.ll,{children:"Account"}),(0,r.jsx)(n.SZ,{children:"Make changes to your account here. Click save when you are done."})]}),(0,r.jsx)(n.aY,{className:"space-y-2",children:(0,r.jsxs)("form",{onSubmit:h,className:"space-y-2",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)(d._,{htmlFor:"name",children:"Name"}),(0,r.jsx)(o.I,{id:"name",value:s,onChange:e=>t(e.target.value)})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)(d._,{htmlFor:"username",children:"Username"}),(0,r.jsx)(o.I,{id:"username",value:l,onChange:e=>f(e.target.value)}),x&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:x})]}),(0,r.jsx)(n.eW,{children:(0,r.jsx)(a.z,{type:"submit",children:"Save changes"})})]})})]})})}var x=t(39381);let p=(e,s)=>{let t={};return s&&(e.currentPassword?e.currentPassword.length<6&&(t.currentPassword="Current password must be at least 6 characters"):t.currentPassword="Current password is required"),e.newPassword?e.newPassword.length<6&&(t.newPassword="New password must be at least 6 characters"):t.newPassword="New password is required",t};function h(){let{data:e}=(0,u.useSession)(),[s,t]=(0,i.useState)(!1),l=(0,i.useCallback)(async()=>{e&&t((await c.Z.post("/api/user/has-password",{id:null==e?void 0:e.id})).data.hasPassword)},[e]);(0,i.useEffect)(()=>{l()},[e,l]);let f=async(s,t)=>{let{setSubmitting:r,setErrors:a}=t;try{(await c.Z.post("/api/user/update-password",{...s,id:null==e?void 0:e.id})).data.success?m.Am.success("Password changed successfully!"):m.Am.error("Password could not be changed")}catch(e){e.response&&e.response.data&&(a({api:e.response.data.message}),m.Am.error(e.response.data.message||"An error occurred"))}finally{r(!1)}};return(0,r.jsx)("div",{children:(0,r.jsxs)(n.Zb,{children:[(0,r.jsxs)(n.Ol,{children:[(0,r.jsx)(n.ll,{children:"Password"}),(0,r.jsx)(n.SZ,{children:s?"Change your password here. After saving, you'll be logged out.":"Set a new password here."})]}),(0,r.jsx)(n.aY,{className:"space-y-2",children:(0,r.jsx)(x.J9,{initialValues:{currentPassword:"",newPassword:""},validate:e=>p(e,s),onSubmit:f,children:e=>{let{isSubmitting:t}=e;return(0,r.jsxs)(x.l0,{children:[s&&(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)(d._,{htmlFor:"currentPassword",children:"Current password"}),(0,r.jsx)(x.gN,{id:"currentPassword",name:"currentPassword",type:"password",as:o.I}),(0,r.jsx)(x.Bc,{name:"currentPassword",component:"div",className:"text-red-600 text-sm"})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)(d._,{htmlFor:"newPassword",children:"New password"}),(0,r.jsx)(x.gN,{id:"newPassword",name:"newPassword",type:"password",as:o.I}),(0,r.jsx)(x.Bc,{name:"newPassword",component:"div",className:"text-red-600 text-sm"})]}),(0,r.jsx)(n.eW,{children:(0,r.jsx)(a.z,{type:"submit",disabled:t,children:"Save password"})})]})}})})]})})}function g(){return(0,r.jsx)("div",{className:"flex items-center justify-center mt-8 border p-4",children:(0,r.jsxs)(l.mQ,{defaultValue:"password",className:"w-[400px]",children:[(0,r.jsxs)(l.dr,{className:"grid w-full grid-cols-2",children:[(0,r.jsx)(l.SP,{value:"account",children:"Account"}),(0,r.jsx)(l.SP,{value:"password",children:"Password"})]}),(0,r.jsx)(l.nU,{value:"account",children:(0,r.jsx)(f,{})}),(0,r.jsx)(l.nU,{value:"password",children:(0,r.jsx)(h,{})})]})})}},56360:function(e,s,t){"use strict";t.d(s,{d:function(){return l},z:function(){return i}});var r=t(57437),a=t(2265),n=t(71538),o=t(12218),d=t(77700);let l=(0,o.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),i=a.forwardRef((e,s)=>{let{className:t,variant:a,size:o,asChild:i=!1,...c}=e,u=i?n.g7:"button";return(0,r.jsx)(u,{className:(0,d.cn)(l({variant:a,size:o,className:t})),ref:s,...c})});i.displayName="Button"},10273:function(e,s,t){"use strict";t.d(s,{Ol:function(){return d},SZ:function(){return i},Zb:function(){return o},aY:function(){return c},eW:function(){return u},ll:function(){return l}});var r=t(57437),a=t(2265),n=t(77700);let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});o.displayName="Card";let d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...a})});d.displayName="CardHeader";let l=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("h3",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})});l.displayName="CardTitle";let i=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("p",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",t),...a})});i.displayName="CardDescription";let c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",t),...a})});c.displayName="CardContent";let u=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",t),...a})});u.displayName="CardFooter"},10464:function(e,s,t){"use strict";t.d(s,{_:function(){return i}});var r=t(57437),a=t(2265),n=t(38364),o=t(12218),d=t(77700);let l=(0,o.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),i=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(n.f,{ref:s,className:(0,d.cn)(l(),t),...a})});i.displayName=n.f.displayName},65236:function(e,s,t){"use strict";t.d(s,{SP:function(){return i},dr:function(){return l},mQ:function(){return d},nU:function(){return c}});var r=t(57437),a=t(2265),n=t(62447),o=t(77700);let d=n.fC,l=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(n.aV,{ref:s,className:(0,o.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...a})});l.displayName=n.aV.displayName;let i=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(n.xz,{ref:s,className:(0,o.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...a})});i.displayName=n.xz.displayName;let c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(n.VY,{ref:s,className:(0,o.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...a})});c.displayName=n.VY.displayName}},function(e){e.O(0,[4616,7259,8422,8943,998,6648,8472,7138,4868,7671,556,4143,4784,3118,1979,6461,5985,8726,3749,4744,4858,2971,7023,1744],function(){return e(e.s=68537)}),_N_E=e.O()}]);